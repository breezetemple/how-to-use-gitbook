language: node_js
node_js: stable
before_install:
- npm install -g gitbook-cli
install:
- gitbook install
- gitbook build
test: true
script:
- git checkout --orphan gh-pages
- git rm --cached -r .
- git clean -df
- rm -rf *~
- cp -r _book/* .
- git add .
- git commit -m "Publish book"
- git push -f "https://${GITHUB_TOKEN}@${GH_REF}" master:gh-pages
deploy:
  provider: pages
  skip_cleanup: true
  keep_history: true
  on:
    branch: master
env:
  global:
  - GH_REF: github.com/breezetemple/how-to-use-gitbook.git
  - secure: lqt6evRBA+4MXRyRnd+ygqrgVXiB8adZXYTrfUKTRS224zq0LojruPIPzGJH07QMieiY1+1I1aoignZTEqYq7QEqaTwHVq2b7qCI7eUMwx82CN/69hj7Rp3Dt9/yzVxzhFwoaOSOjzxRCWPe17iua66eunr79JpeB5jL3xTIm36sB6jl0tTtGAe3w20Uh0CH5RqHBBw9rgyuoS705lh1VeMwYwGmLeaATPUbh5U5bUO2QhkWTM8QwaCzgH4mXAZ/dRjpzojCuITKw6ojG5CwVF5UQ/Wxk4MV+f84qSGWv+PxNfCjIrPXuEwmSO9DdHmHJ/8/tPQCvui1QRG4jvY4mTGc7rEIHOxj1Dn0MUwBDCD5fJbKYX+r0D5+9QqPTTyQhHcWAYMoKru0nGojyWi2mhh0x0nYCM00wTcCfJAsB94q5PP+jzvKFO3ZdcnTIJQAyrVU9TUfGUF/n84DowijTciTDR7qIY4DJJjrc8YGCc00xFvln/lmhji29itLi8mkM9ghTe8Qng/9KupBUbUmmOhXsir1/xYaixCmysMIi36wC4Tw6lXM/WMhS69qJbKzadglKthILtgwKBXhTAgoM2PnsazYL5JCdFLu7VDLzgyJegK3Rt0ddZOcXrW3Q1UjVDFIVNfyDgpm6WoVotHwRLDNIz0XUaiTVZCPInbpheI=
