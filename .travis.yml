language: generic
before_install:
- npm install -g gitbook-cli
- rm -rf _build
- echo TRAVIS_SECURE_ENV_VARS = ${TRAVIS_SECURE_ENV_VARS}
install:
- gitbook install
- gitbook build
script:
- git checkout --orphan gh-pages
- git rm --cached -r .
- git clean -df
- rm -rf *~
- echo "*~" > .gitignore
- echo "_book" >> .gitignore
- echo "node_modules" >> .gitignore
- git add .gitignore
- git commit -m "Ignore some files"
- cp -r _book/* .
- git add .
- git commit -m "Publish book"
- git push --force --quiet "https://${GITHUB_TOKEN}@${GH_REF}" gh-pages:gh-pages
branches:
  only:
  - master
env:
  global:
  - GH_REF: github.com/breezetemple/how-to-use-gitbook.git
  - secure: Cl4YLjcYC3Wjw5Xs7onCCXpQggmZbcn3sbSlQ0zwu3XlxOyx/drX9IZslU5VjDiArNeF4NGWJ4iMLO9kqEazqflqOzXyo36ixjyR/zv77heIx6XqbAbR8mmDzj1GnDZaG9IKLVYMMRZP2daMg3rCQAEo5DDAsOY+1svJGnmMEEvt0PzIMUd1iKvFE8+ZJEhSkPFrdbTjuIbzXG2RquAWv9ip8xGqvnSL6zqUDaWhkFN4r23w32a3wbCBf+CB9YuLs1J8wexxWF89giHutx5RqOcVo7FlVwIhzRGTlX53xIwyJLQSsBZHSLJGXEJfhrt+DHLnTWgrhyQfCv3GF8FXGobjhQpb9r8ZR7yUcn29bJaC5NMaTCdiHzSjkSj8/if89Zr+1vNS0Xf3P7S9FRGbu8HghOBGVdBHsC8/wioPrBQHI61IxZKE+zZWR0Xt3ByDnApt6b3L8AvqeLZ/+2WRjBtZ0kLKJbQfZpEw3SLhgFPg9747L9M/XB5aGhFKmcF0u2G36Re8Q3cayh5CymO+V6EeOMONij/f9Kw/37+axpQ3BWab89ps8Qfj4jJyYcTUbO3bB7FMBCTzLT3YI/qzEshvH1u1k1x37ZE5h1vP7xywsnaNnvYwJQ7x0AHsIalC/vwIWfdinWQKaL3v5pFQkxNV1Px+9+POCEOTqqAPLuA=
