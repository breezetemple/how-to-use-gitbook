language: node_js
node_js: stable
cache:
  directories:
  - node_modules
before_install:
- npm install -g gitbook-cli
install:
- gitbook install
- gitbook build
test: true
script:
- git checkout --orphan gh-pages
- git rm --cached -r .
- git clean -df
- rm -rf *~
- cp -r _book/* .
- git config user.name "breezetemple"
- git config user.email "breeze.temple@gmail.com"
- git add .
- git commit -m "Publish book"
- git push --force --quiet "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
branches:
  only:
  - master
env:
  global:
  - GH_REF: github.com/breezetemple/how-to-use-gitbook.git
  - secure: zDjitxdArbEchCBi/OfWzaWguCgjstZ35S0iGLy8DtHza9uoR9iyIhC3zI2L4RtBwg5L0DyF3ejqJczjbC+0kVSS9CtCqLDILLZAuGrIG2wuDzEYXNP09fZ31cH7dn2RLdoD0RMp8yRIrwfSuOmcghiaP/++u5CUgQNXAMPOqa77TxlKc/RFBIVGEKyg3irm2IdK/dS7FUBSS65j69YFNN4kbknj73tD76n/XXSakg6Ya/6fQWZ99NCJI30OzPCxrQWZyOwi56zDJ9EBEH+/N+6sa/XQc5rl/7niu5N7n9eHVg8legyZn5c+QNXrwQjqZzvupftT9MgYZu8515/39mk5mqu3DcIbDoTErpUuS0kgOqO/DCNutmAZlyhfpHpf1uuHqPhFz2RbGa1zuJr8EM0Cka+wezloG+uEFZD+/klgBC/BRKJvmXdtjHhBKCFAl1cjhfVFtFl6trpMLb7UznC2BvfTi3ouaNWPWqJznnOBZ3SuK+nY+CaO4doqt9EE1EqlHyAJlguKCblxlEb2naUnikU8uOmkFEUL13NzUGzJ7uMkRNAOxQAGLWUaTCWpybqDuBAaT4dSBzGdQFsOVp4bOsZSHvbUCsZQTMljrX4ve94HUlFuvWGoKxyGgZHG9olaXx83L/2s1MPXeH/1kfNM7eGLUfcmVob46mHVJVI=
