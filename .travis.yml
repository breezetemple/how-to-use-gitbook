language: generic
before_install:
- npm install -g gitbook-cli
- rm -rf _build
- echo TRAVIS_SECURE_ENV_VARS = ${TRAVIS_SECURE_ENV_VARS}
install:
- gitbook install
- gitbook build
script:
- git checkout --orphan gh-pages
- git rm --cached -r .
- git clean -df
- rm -rf *~
- echo "*~" > .gitignore
- echo "_book" >> .gitignore
- echo "node_modules" >> .gitignore
- git add .gitignore
- git commit -m "Ignore some files"
- cp -r _book/* .
- git add .
- git commit -m "Publish book"
- git push --force --quiet "https://${GITHUB_TOKEN}@${GH_REF}" gh-pages:gh-pages
branches:
  only:
  - master
env:
  global:
  - GH_REF: github.com/breezetemple/how-to-use-gitbook.git
  - secure: oWHRlGBEscMisN3iOZSIjSon6jiXKdUsXk1khjfP+OR2w9VvlUf5k1VGW83cQfgQvDY+CSavBNfhcgPX/vwh4hFKVXJnGtK3y//qRf7OLriGYi0Saf3s0J1E65YzdkGYAE7W0p1JHjM1zuQq77brm15x7l1WRkgzXVPu8+mY+c7AYRdINK8s3Y9nftBnMPt3jzzqs/mWrKCxaEXltgq7OnZWwSRpJIqJCE3BjM/Nrx6KbOZac0YItl4aw2xVeBob6QE6ufRfzruq6HZmBwkw/mVvgOXplx8hZefcMJlACSwar7VXRD/7Lqdx0dHtBvEv2rRPfRvbjj3dUPHqqSAo0yNevkItoUIpxr3iTKtNN+7Cwz1QIs9m7E5a3AeVH0CqIVxni3Tn1gCzgq+LU6RpvakrpC9kA90FHTEhIGDLDq3ZIO8HJMxBvm/vIJw4TtqREQ74eSjITO3Cl0eQI6WfFLsGPYKY6j3Uy+5RzVcQ9ZzIxQrwR0eplRJ2Xh/PbtRlWtGac2P8QZ8ZrGs3zrc+YF212br8dWe5i0aL7IfTLGP8kQhYL90u2mQQ+U7G3t04ywDAEleRhNM0OM+cExibtgZ7giFTfG9+pj7OQm6W9+f0OWNTACiySOKhtbK7skSyD2W8I9lV0KDTeuvT1873ouACQc+qqcIIf5uJAfspWuE=
