language: generic
before_install:
- npm install -g gitbook-cli
- rm -rf _build
- echo TRAVIS_SECURE_ENV_VARS = ${TRAVIS_SECURE_ENV_VARS}
install:
- gitbook install
- gitbook build
script:
- git checkout --orphan gh-pages
- git rm --cached -r .
- git clean -df
- rm -rf *~
- echo "*~" > .gitignore
- echo "_book" >> .gitignore
- echo "node_modules" >> .gitignore
- git add .gitignore
- git commit -m "Ignore some files"
- cp -r _book/* .
- git add .
- git commit -m "Publish book"
- git push --force --quiet "https://${GITHUB_TOKEN}@${GH_REF}" gh-pages:gh-pages
branches:
  only:
  - master
env:
  global:
  - GH_REF: github.com/breezetemple/how-to-use-gitbook.git
  - secure: pYcummlKP48dSYaaL9D5l3SYk7cSKvBvToMAMqsx+PVptQuoyV52DuWRP2dMcV0H+XQVHBXB2lEi1jCzO0dHWhdeiJE6/jhkYKhzQj21X5nETKB3EVsBrTLcVI2juFaBoVOCRov8iQq67HtST1yuJdBzGR8wl0YAotZnzy2gVojey4HM6qqCpY/BNnumEJlQAC8SwjbUFRLr71Qo6t0nMmdbBr1mv3RL0YVsxCw7K4cYYJvGdzDyNxkWVIiZ/5iTvwfNM2GN7B5eUWpfnyKXFzBUiiVIDEz3HSezm6ofTdFAbbMIUScU4VvQZYqoF5oWNbcbdxighQHOoCFIpvBc0AbsBLz88n5ZF93G17vrgFSmak8yRrZj90kNfe0a4mdSRvt6BXmW1obAsBZxri5VfPmI7kv0Rb1+Mqkl2JD6cwtyWsblecb8lIudUcFiZFkBwVAwQb+GzTjHgvtH+yO0PeuODxIRvHGmsneqEsgX1jMAu6C9dXhxwcIKwL/e0M3qSqHqzAE9au5XkuIcUJXFdLmSPwo2ddVxOB+/ebi1E9h5glqYmE8VQ6yeSOSdSNWf5bEYCHFngToBZfZt5Dj5UzN8pgMbnLw3UNboO52fDlCnAFpk8XOtXOJHUJI4Ow6t+/58pNJiDT36o583tYF3hSNoqRwDIjXeqAPBlINURhM=
