language: generic
before_install:
- npm install -g gitbook-cli
- rm -rf _build
- composer config --global github-oauth.github.com "$GITHUB_TOKEN"
- echo TRAVIS_SECURE_ENV_VARS = ${TRAVIS_SECURE_ENV_VARS}
install:
- gitbook install
- gitbook build
script:
- git checkout --orphan gh-pages
- git rm --cached -r .
- git clean -df
- rm -rf *~
- echo "*~" > .gitignore
- echo "_book" >> .gitignore
- echo "node_modules" >> .gitignore
- git add .gitignore
- git commit -m "Ignore some files"
- cp -r _book/* .
- git add .
- git commit -m "Publish book"
- git push --force --quiet "https://${GITHUB_TOKEN}@${GH_REF}" gh-pages:gh-pages
branches:
  only:
  - master
env:
  global:
  - GH_REF: github.com/breezetemple/how-to-use-gitbook.git
  - secure: NzqvhtT1Zu953cUHeW9ox6xwW71rrEgwhR1KdN/in2N+5dM9BlJ1+rxF2iYQ67FwGx8SFSZC/9QVvNlvTswl2/kS+8sTGj4wcvSnZaNHjxPx4HzXC2hlAJEYiK7fyjVQz/XsXXH3xwu1IVZSNGAvSr1DFXQT/0y7785fv8wxs5oJUWskEdzUerwS3+nYWJsyvgrmjSqzsE8FPpnfuxUDxO7UJm6LM0127pMYIUPOet6giKcUDZNf/aeKPxCRSuY3AkmuMEnoXkRGOn6ye/BICBEZ2hhPEXS8Emd0f7swOYxX17Qog/c88VVMcS4t9YnLmZjTL7fW9FLzsHUV3tcc6xJJewoBje/YuZiDeIxJRgYZ5PcfIw0LcplKYnkNAHrDzrUNSi9nBNCtubHeWXJK8likJ5nqnn5N/SkuNSSFLJJmHRbjIwoZWd5nAHb48hsjD18XWNqsMqWL1tqkQ6DdKJytoNXqXrfX9TR6PMQ+zJJ04df1Rzqwq0897VKyvHU3g6UxwwQBpOYPYL3bjFsC3SugY/E/XiFr0ep3V+OyjaX3tqqFlIUc1Vekom9sIPcRXCkXjwnp4EpbMqSuRcIWOZ0MkBowdgDf0KcthgQNRhuV3KO25MFLgXILz1PODdIpNXZjiR8TfKF49ZrJ1jdb5L1Qf/vsNe9xtaeVmRLo1Cw=
